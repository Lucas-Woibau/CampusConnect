@model RegisterDto
@{
}

<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8">
            <div class="card shadow-lg border border-dark">
                <div class="card-body p-5">
                    <div class="text-center mb-4">
                        <img src="~/Images/LOGO.png" alt="Logo" class="img-fluid mb-3" style="max-width: 200px;">
                    </div>

                    <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

                    <form method="post">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Nome" class="form-label">Nome</label>
                                    <input class="form-control @(ViewData.ModelState["Nome"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="Nome" placeholder="Digite seu primeiro nome">
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Nome"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Sobrenome" class="form-label">Sobrenome</label>
                                    <input class="form-control @(ViewData.ModelState["Sobrenome"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="Sobrenome" placeholder="Digite seu sobrenome">
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Sobrenome"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Telefone" class="form-label">Telefone</label>
                                    <input id="Telefone" class="form-control @(ViewData.ModelState["Telefone"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="Telefone" placeholder="(00) 00000-0000">
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Telefone"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Cidade" class="form-label">Cidade</label>
                                    <select class="form-select @(ViewData.ModelState["Cidade"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="Cidade">
                                        <option value="">Selecione a cidade</option>
                                        <option value="PANCAS">PANCAS</option>
                                        <option value="LAGINHA">LAGINHA</option>
                                        <option value="VILA VERDE">VILA VERDE</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Cidade"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Curso" class="form-label">Curso</label>
                                    <input class="form-control @(ViewData.ModelState["Curso"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="Curso" placeholder="Digite seu curso">
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Curso"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Matricula" class="form-label">Matrícula</label>
                                    <input class="form-control @(ViewData.ModelState["Matricula"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="Matricula" placeholder="Digite sua matrícula">
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Matricula"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Instituicao" class="form-label">Instituição</label>
                                    <select id="instituicaoSelect" class="form-select @(ViewData.ModelState["Instituicao"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="Instituicao">
                                        <option value="">Selecione a instituição</option>
                                        <option value="UNESC">UNESC</option>
                                        <option value="CASTELO BRANCO">CASTELO BRANCO</option>
                                        <option value="IFES">IFES</option>
                                        <option value="SENAI">SENAI</option>
                                        <option value="OUTRA">OUTRA</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Instituicao"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3" id="outraInstituicaoDiv" style="display:none;">
                                <div class="form-group">
                                    <label for="Instituicao" class="form-label">Nome da instituição</label>
                                    <input id="novaInstituicao" class="form-control @(ViewData.ModelState["NovaInstituicao"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="NovaInstituicao" placeholder="Digite o nome da instituição">
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="NovaInstituicao"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Rota" class="form-label">Rota</label>
                                    <select class="form-select @(ViewData.ModelState["Rota"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="Rota">
                                        <option value="">Selecione a rota</option>
                                        <option value="UNESC">UNESC</option>
                                        <option value="CASTELO/CENTRO/IFES">CASTELO/CENTRO/IFES</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Rota"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Periodo" class="form-label">Período</label>
                                    <input class="form-control @(ViewData.ModelState["Periodo"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="Periodo" placeholder="0/00">
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Periodo"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Email" class="form-label">Email</label>
                                    <input type="email" class="form-control @(ViewData.ModelState["Email"]?.Errors.Count > 0 ? "is-invalid" : "")" asp-for="Email" placeholder="Digite seu email">
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Email"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="Senha" class="form-label">Senha</label>
                                    <input class="form-control @(ViewData.ModelState["Senha"]?.Errors.Count > 0 ? "is-invalid" : "")" type="password" asp-for="Senha" placeholder="Digite sua senha">
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="Senha"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <div class="form-group">
                                    <label for="ConfirmarSenha" class="form-label">Confirmar Senha</label>
                                    <input class="form-control @(ViewData.ModelState["ConfirmarSenha"]?.Errors.Count > 0 ? "is-invalid" : "")" type="password" asp-for="ConfirmarSenha" placeholder="Confirme sua senha">
                                    <div class="invalid-feedback">
                                        <span asp-validation-for="ConfirmarSenha"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="d-grid gap-2 mt-4">
                                <button type="submit" class="btn btn-success btn-lg">Registrar</button>

                                <div class="text-center my-3">
                                    <span>Já possui uma conta?</span>
                                </div>

                                <a class="btn btn-primary btn-lg" asp-controller="Account" asp-action="Login" role="button">
                                    Entrar
                                </a>
                            </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('instituicaoSelect').addEventListener('change', function () {
            var instituicaoSelect = document.getElementById('instituicaoSelect');
            var outraInstituicaoDiv = document.getElementById('outraInstituicaoDiv');
            var novaInstituicao = document.getElementById('novaInstituicao');

            if (instituicaoSelect.value === 'OUTRA') {
                outraInstituicaoDiv.style.display = ''; // Mostra a div
                novaInstituicao.disabled = false; // Habilita o campo
            } else {
                outraInstituicaoDiv.style.display = 'none'; // Oculta a div
                novaInstituicao.disabled = true; // Desabilita o campo
                novaInstituicao.removeAttribute('required'); // Remove o atributo required
                novaInstituicao.value = ''; // Limpa o valor do campo para evitar que ele seja enviado
            }
        });

        // Inicializa o estado do campo ao carregar a página
        document.addEventListener('DOMContentLoaded', function () {
            var instituicaoSelect = document.getElementById('instituicaoSelect');
            var outraInstituicaoDiv = document.getElementById('outraInstituicaoDiv');
            var novaInstituicao = document.getElementById('novaInstituicao');

            // Verifica o valor inicial do select e ajusta o estado do campo
            if (instituicaoSelect.value === 'OUTRA') {
                outraInstituicaoDiv.style.display = ''; // Mostra a div
                novaInstituicao.disabled = false; // Habilita o campo
                novaInstituicao.setAttribute('required', 'required'); // Adiciona o atributo required
            } else {
                outraInstituicaoDiv.style.display = 'none'; // Oculta a div
                novaInstituicao.disabled = true; // Desabilita o campo
                novaInstituicao.removeAttribute('required'); // Remove o atributo required
                novaInstituicao.value = ''; // Limpa o valor do campo para evitar que ele seja enviado
            }
        });
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
            crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>

    <script>
        $('#Telefone').mask('(00) 00000-0000');
        $('#Periodo').mask('0/00');
    </script>
